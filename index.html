<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>G√™nio da Matem√°tica</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    min-height: 100vh;
    font-family: "Comic Sans MS", Arial, sans-serif;
    background: linear-gradient(135deg, #ffdd00, #ff8c00);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

.card {
    background: white;
    width: 95%;
    max-width: 440px;
    padding: 25px;
    border-radius: 20px;
    text-align: center;
    border: 5px solid #4CAF50;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.pergunta {
    font-size: 2.5rem;
    background: #e3f2fd;
    padding: 15px;
    border-radius: 15px;
    border: 3px dashed #2196F3;
    margin: 15px 0;
}

input {
    font-size: 1.8rem;
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: 3px solid #ff9800;
    text-align: center;
}

button {
    width: 100%;
    margin-top: 15px;
    font-size: 1.6rem;
    padding: 14px;
    border-radius: 15px;
    border: none;
    background: #4CAF50;
    color: white;
}

.info {
    margin-top: 8px;
    font-size: 1.2rem;
}

.timer {
    font-size: 1.5rem;
    color: #e53935;
    font-weight: bold;
}

.confete {
    position: absolute;
    width: 10px;
    height: 14px;
    animation: cair 1.5s linear forwards;
}

@keyframes cair {
    from { transform: translateY(-20px) rotate(0); }
    to { transform: translateY(100vh) rotate(360deg); }
}
</style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8948326507672314"
     crossorigin="anonymous"></script>


</head>
<body>

<div class="card">
    <h1>üß† G√™nio da Matem√°tica</h1>

    <div class="info">N√≠vel: <b id="nivel">Aprendiz</b></div>
    <div class="info timer">‚è±Ô∏è Tempo: <span id="tempo">15</span>s</div>

    <div class="pergunta" id="pergunta">?</div>

    <input type="number" id="resposta" placeholder="Digite a resposta">

    <button onclick="verificar()">üöÄ Responder</button>

    <div class="info" id="mensagem"></div>

    <div class="info">
        ‚≠ê Pontos: <span id="pontos">0</span><br>
        üèÜ Recorde: <span id="recorde">0</span>
    </div>
</div>

<div id="anuncio" style="display:none; margin-top:15px; text-align:center;">
    <p>üéÅ Voc√™ ganhou uma nova chance!</p>

    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-8948326507672314"
         data-ad-slot="4692608728"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>

    <button onclick="continuarJogo()" style="margin-top:10px;">
        ‚ñ∂ Continuar
    </button>
</div>


<script>
let pontos = 0; 
let vidaExtraDisponivel = true;
let recorde = localStorage.getItem("recorde") || 0;
document.getElementById("recorde").innerText = recorde;

let perguntaAtual = "";
let resultado = 0;
let tempo = 15;
let cronometro;

// Sons
const somAcerto = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
const somErro = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");

function mostrarAnuncioVidaExtra() {
    if (!vidaExtraDisponivel) {
        salvarRecorde();
        pontos = 0;
        document.getElementById("pontos").innerText = pontos;
        novaPergunta();
        return;
    }

    vidaExtraDisponivel = false;
    document.getElementById("anuncio").style.display = "block";

    try {
        (adsbygoogle = window.adsbygoogle || []).push({});
    } catch (e) {}
}

function continuarJogo() {
    document.getElementById("anuncio").style.display = "none";

    tempo = tempoPorNivel() + 30; // ‚è±Ô∏è +30s
    document.getElementById("tempo").innerText = tempo;

    cronometro = setInterval(() => {
        tempo--;
        document.getElementById("tempo").innerText = tempo;
        if (tempo <= 0) tempoEsgotado();
    }, 1000);
}


function nivelAtual() {
    if (pontos < 10) return "Aprendiz";
    if (pontos < 20) return "M√©dio";
    return "G√™nio";
}

function tempoPorNivel() {
    let nivel = nivelAtual();
    if (nivel === "G√™nio") return 40;
    return 30;
}

function salvarRecorde() {
    if (pontos > recorde) {
        recorde = pontos;
        localStorage.setItem("recorde", recorde);
        document.getElementById("recorde").innerText = recorde;
        alert("üèÜ Novo recorde!");
    }
}


function gerarAprendiz() {
    const ops = ["+", "-", "x", "√∑"];
    let op = ops[Math.floor(Math.random() * ops.length)];

    let a, b;

    if (op === "√∑") {
        resultado = Math.floor(Math.random() * 9) + 1; // resultado 1 a 9
        b = Math.floor(Math.random() * 9) + 1;         // divisor
        a = resultado * b;                             // dividendo
    }
    else if (op === "-") {
        a = Math.floor(Math.random() * 9) + 1;
        b = Math.floor(Math.random() * 9) + 1;
        if (b > a) [a, b] = [b, a];
        resultado = a - b;
    }
    else if (op === "+") {
        a = Math.floor(Math.random() * 9) + 1;
        b = Math.floor(Math.random() * 9) + 1;
        resultado = a + b;
    }
    else {
        a = Math.floor(Math.random() * 9) + 1;
        b = Math.floor(Math.random() * 9) + 1;
        resultado = a * b;
    }

    perguntaAtual = `${a} ${op} ${b}`;
}


function gerarMedio() {
    const ops = ["+", "-", "x", "√∑"];
    let op = ops[Math.floor(Math.random() * ops.length)];

    let a, b;

    // ‚ûó DIVIS√ÉO (igual ao aprendiz)
    if (op === "√∑") {
        resultado = Math.floor(Math.random() * 9) + 1; // 1 a 9
        b = Math.floor(Math.random() * 9) + 1;         // divisor
        a = resultado * b;                             // dividendo
    }

    // ‚úñÔ∏è MULTIPLICA√á√ÉO (resultado at√© 2 d√≠gitos)
    else if (op === "x") {
        a = Math.floor(Math.random() * 9) + 2; // 2 a 10
        b = Math.floor(Math.random() * 9) + 2; // 2 a 10
        resultado = a * b;

        // garante at√© 2 d√≠gitos
        if (resultado > 99) {
            a = 9;
            b = 9;
            resultado = 81;
        }
    }

    // ‚ûï SOMA (2  d√≠gitos)
    else if (op === "+") {
        a = Math.floor(Math.random() * 90) + 10; // 10 a 99
        b = Math.floor(Math.random() * 90) + 10;
        resultado = a + b;
    }

    // ‚ûñ SUBTRA√á√ÉO (2  d√≠gitos)
    else {
        a = Math.floor(Math.random() * 90) + 10;
        b = Math.floor(Math.random() * 90) + 10;
        if (b > a) [a, b] = [b, a];
        resultado = a - b;
    }

    perguntaAtual = `${a} ${op} ${b}`;
}



function gerarGenio() {
    let a = Math.floor(Math.random() * 9) + 1;
    let b = Math.floor(Math.random() * 9) + 1;
    let c = Math.floor(Math.random() * 9) + 1;

    perguntaAtual = `${a} + ${b} x ${c}`;
    resultado = a + (b * c);
}


function novaPergunta() {
    clearInterval(cronometro);

    vidaExtraDisponivel = true;
    document.getElementById("anuncio").style.display = "none";


    let nivel = nivelAtual();
    document.getElementById("nivel").innerText = nivel;

    if (nivel === "Aprendiz") gerarAprendiz();
    else if (nivel === "M√©dio") gerarMedio();
    else gerarGenio();

    document.getElementById("pergunta").innerText = perguntaAtual;
    document.getElementById("resposta").value = "";
    document.getElementById("mensagem").innerText = "";

    tempo = tempoPorNivel();
    document.getElementById("tempo").innerText = tempo;

    cronometro = setInterval(() => {
        tempo--;
        document.getElementById("tempo").innerText = tempo;
        if (tempo <= 0) tempoEsgotado();
    }, 1000);
}

function confete() {
    const cores = ["red","yellow","blue","green","orange"];
    for (let i = 0; i < 25; i++) {
        let c = document.createElement("div");
        c.className = "confete";
        c.style.left = Math.random() * window.innerWidth + "px";
        c.style.backgroundColor = cores[Math.floor(Math.random() * cores.length)];
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 1500);
    }
}

function tempoEsgotado() {
    clearInterval(cronometro);
    somErro.play();

    alert(`‚è±Ô∏è Tempo acabou!\n\n${perguntaAtual} = ${resultado}`);

    mostrarAnuncioVidaExtra();
}



function verificar() {
    let resp = Number(document.getElementById("resposta").value);

    if (resp === resultado) {
        clearInterval(cronometro);
        somAcerto.play();
        confete();
        pontos++;
        document.getElementById("pontos").innerText = pontos;
        novaPergunta();
    } else {
    clearInterval(cronometro);
    somErro.play();

    alert(`‚ùå Ops!\n\n${perguntaAtual} = ${resultado}`);

    mostrarAnuncioVidaExtra();
}

}


novaPergunta();
</script>

</body>
</html>
